(function(n,t){var i,u=!1,r;t.fn.smarttooltip=function(r){return i=n.extend({},t.fn.smarttooltip.defaults,r),s(this)},t.fn.smarttooltip.defaults={tooltipContainerId:"smartTooltip",tooltipOffsets:[10,7],fadeInSpeed:200,rightClickStick:!0,statusTextColors:["#509020","#509020"],hoverStatusText:['Dr&uuml;cke "s"',"oder rechts-click","f&uuml;r Daueranzeige."],stickyStatusText:"Click ausserhalb um Hinweis zu schliessen."};var s=function(t){if(r=n("#"+i.tooltipContainerId),t.length!=0){var s=r.find(".smartTip");t.each(function(){n(this).data("tipref",n(this).attr("title")),n(this).attr("title","")}),i.rightClickStick||(i.hoverStatusText[1]=""),i.hoverStatusText=i.hoverStatusText.join(" "),f(),t.bind("mouseenter",function(t){s.hide().filter("#"+n(this).data("tipref")).show(),h(t)}),t.bind("mouseleave",function(){f()}),t.bind("mousemove",function(n){u||o(n)}),r.bind("mouseenter",function(){f()}),r.bind("click",function(n){n.stopPropagation()}),n(document).bind("click",function(n){n.button==0&&(u=!1,f())}),n(document).bind("contextmenu",function(r){return i.rightClickStick&&n(r.target).parents().andSelf().filter(t).length==1?(e(r),!1):!0}),n(document).bind("keypress",function(n){var t=n.charCode||n.keyCode;t==115&&e(n)})}},h=function(n){r.fadeIn(i.fadeInSpeed),o(n)},f=function(){u||(r.stop(!1,!0).hide(),r.find(".smartStatus:eq(0)").css({color:i.statusTextColors[0]}).html(i.hoverStatusText))},e=function(){u=!0,r.find(".smartStatus:eq(0)").css({color:i.statusTextColors[1]}).html(i.stickyStatusText)},o=function(t){var e=i.tooltipOffsets[0],o=i.tooltipOffsets[1],u=t.pageX+e,f=t.pageY+o,s=r.outerWidth(),h=r.outerHeight();u=u+s>n(document).scrollLeft()+n(window).width()?u-s-e*2:u,u<0&&(u=0),f=f+h>n(document).scrollTop()+n(window).height()?n(document).scrollTop()+n(window).height()-h-o:f,r.css({left:u,top:f})}})(jQuery,jQuery)